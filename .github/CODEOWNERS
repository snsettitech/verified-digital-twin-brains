# GitHub CODEOWNERS — Two-Agent Workflow Risk Reduction
# 
# This file ensures high-risk changes (auth, tenancy, contracts, routers)
# require human review before merging, reducing regressions when two agents 
# work in parallel (Codex + Antigravity).
#
# Edit @sainathsetti to match your GitHub username.
# Refer to CONTRIBUTING.md for the full two-agent workflow playbook.

# ============================================================================
# CRITICAL: Multi-tenant security and authentication
# ============================================================================

# Auth patterns and JWT validation — always require review
/backend/modules/auth_guard.py @sainathsetti
/backend/modules/observability.py @sainathsetti
/backend/modules/_core/ @sainathsetti
/backend/routers/auth.py @sainathsetti

# Frontend auth context
/frontend/lib/supabase/ @sainathsetti
/frontend/middleware.ts @sainathsetti

# ============================================================================
# API CONTRACTS: Routes, schemas, clients (prevent FE/BE drift)
# ============================================================================

# Backend routers — define API surface
/backend/routers/ @sainathsetti

# Shared schemas and Pydantic models
/backend/modules/schemas.py @sainathsetti

# Frontend API client
/frontend/lib/api/ @sainathsetti

# Contract documentation (single source of truth)
docs/CONTRACTS.md @sainathsetti

# ============================================================================
# DATABASE & MIGRATIONS
# ============================================================================

/backend/database/ @sainathsetti
/backend/database/migrations/ @sainathsetti
/backend/main.py @sainathsetti

# ============================================================================
# CI/CD & OPERATIONS
# ============================================================================

/.github/workflows/ @sainathsetti
/scripts/ @sainathsetti
requirements.txt @backend-team
package.json @frontend-team

# Documentation
docs/architecture/ @lead-architect
docs/ @documentation-team
*.md @documentation-team

# Root Configuration
.cursorrules @lead-architect
.gitignore @devops-team

# Default - Require team lead approval
* @lead-architect @backend-team @frontend-team
